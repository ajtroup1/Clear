# 00.clr
Welcome to Clear

*This file is a log of all activity that occured during the interpretation of your source code.*

## Lexical Analysis / Lexing / Tokenization
Lexing (or tokenization) is the process of converting a sequence of characters into a sequence of tokens.

These tokens are the simplest level of strutured data pertaining to the source code information.

*Example Token*: `let` (Type: LET, Literal: 'let')

- Optionally, the token can track other information such as line and column information, which is used for error reporting.

	- Token: `return` (Type: RETURN, Literal:'return', Line: 6, Column: 12)

The lexer reads the source code character by character and generates tokens based on the characters it reads. The lexer is also the first step in the compilation or interpretation process. The lexer is additionally responsible for removing whitespace and comments from the source code.

Source code: 
```js
mod strings: [ len ]
mod arrays: [ first, rest, push ] 

let map = fn(arr, f) {
  let iter = fn(arr, accumulated) {
    if (len(arr) == 0) {
      accumulated
    } else {
      iter(rest(arr), push(accumulated, f(first(arr))));
    }
  };
  iter(arr, []);
};

let a = [1, 2, 3, 4];
let double = fn(x) { x * 2 };
map(a, double);
```

Lexing source code...

Here is the stream of all tokens generated by the lexer:

```
	- Token::== '==' at [line: 0, col: 0]
	- Token::EOF '' at [line: 0, col: 0]
	- Token::EOF '' at [line: 0, col: 0]
	- Token::MOD 'mod' at [line: 1, col: 1]
	- Token::IDENT 'strings' at [line: 1, col: 5]
	- Token::: ':' at [line: 1, col: 12]
	- Token::[ '[' at [line: 1, col: 14]
	- Token::IDENT 'len' at [line: 1, col: 16]
	- Token::] ']' at [line: 1, col: 20]
	- Token::MOD 'mod' at [line: 2, col: 1]
	- Token::IDENT 'arrays' at [line: 2, col: 5]
	- Token::: ':' at [line: 2, col: 11]
	- Token::[ '[' at [line: 2, col: 13]
	- Token::IDENT 'first' at [line: 2, col: 15]
	- Token::, ',' at [line: 2, col: 20]
	- Token::IDENT 'rest' at [line: 2, col: 22]
	- Token::, ',' at [line: 2, col: 26]
	- Token::IDENT 'push' at [line: 2, col: 28]
	- Token::] ']' at [line: 2, col: 33]
	- Token::LET 'let' at [line: 4, col: 1]
	- Token::IDENT 'map' at [line: 4, col: 5]
	- Token::= '=' at [line: 4, col: 9]
	- Token::FUNCTION 'fn' at [line: 4, col: 11]
	- Token::( '(' at [line: 4, col: 13]
	- Token::IDENT 'arr' at [line: 4, col: 14]
	- Token::, ',' at [line: 4, col: 17]
	- Token::IDENT 'f' at [line: 4, col: 19]
	- Token::) ')' at [line: 4, col: 20]
	- Token::{ '{' at [line: 4, col: 22]
	- Token::LET 'let' at [line: 5, col: 3]
	- Token::IDENT 'iter' at [line: 5, col: 7]
	- Token::= '=' at [line: 5, col: 12]
	- Token::FUNCTION 'fn' at [line: 5, col: 14]
	- Token::( '(' at [line: 5, col: 16]
	- Token::IDENT 'arr' at [line: 5, col: 17]
	- Token::, ',' at [line: 5, col: 20]
	- Token::IDENT 'accumulated' at [line: 5, col: 22]
	- Token::) ')' at [line: 5, col: 33]
	- Token::{ '{' at [line: 5, col: 35]
	- Token::IF 'if' at [line: 6, col: 5]
	- Token::( '(' at [line: 6, col: 8]
	- Token::IDENT 'len' at [line: 6, col: 9]
	- Token::( '(' at [line: 6, col: 12]
	- Token::IDENT 'arr' at [line: 6, col: 13]
	- Token::) ')' at [line: 6, col: 16]
	- Token::INT '0' at [line: 6, col: 21]
	- Token::) ')' at [line: 6, col: 22]
	- Token::{ '{' at [line: 6, col: 24]
	- Token::IDENT 'accumulated' at [line: 7, col: 7]
	- Token::} '}' at [line: 8, col: 5]
	- Token::ELSE 'else' at [line: 8, col: 7]
	- Token::{ '{' at [line: 8, col: 12]
	- Token::IDENT 'iter' at [line: 9, col: 7]
	- Token::( '(' at [line: 9, col: 11]
	- Token::IDENT 'rest' at [line: 9, col: 12]
	- Token::( '(' at [line: 9, col: 16]
	- Token::IDENT 'arr' at [line: 9, col: 17]
	- Token::) ')' at [line: 9, col: 20]
	- Token::, ',' at [line: 9, col: 21]
	- Token::IDENT 'push' at [line: 9, col: 23]
	- Token::( '(' at [line: 9, col: 27]
	- Token::IDENT 'accumulated' at [line: 9, col: 28]
	- Token::, ',' at [line: 9, col: 39]
	- Token::IDENT 'f' at [line: 9, col: 41]
	- Token::( '(' at [line: 9, col: 42]
	- Token::IDENT 'first' at [line: 9, col: 43]
	- Token::( '(' at [line: 9, col: 48]
	- Token::IDENT 'arr' at [line: 9, col: 49]
	- Token::) ')' at [line: 9, col: 52]
	- Token::) ')' at [line: 9, col: 53]
	- Token::) ')' at [line: 9, col: 54]
	- Token::) ')' at [line: 9, col: 55]
	- Token::; ';' at [line: 9, col: 56]
	- Token::} '}' at [line: 10, col: 5]
	- Token::} '}' at [line: 11, col: 3]
	- Token::; ';' at [line: 11, col: 4]
	- Token::IDENT 'iter' at [line: 12, col: 3]
	- Token::( '(' at [line: 12, col: 7]
	- Token::IDENT 'arr' at [line: 12, col: 8]
	- Token::, ',' at [line: 12, col: 11]
	- Token::[ '[' at [line: 12, col: 13]
	- Token::] ']' at [line: 12, col: 14]
	- Token::) ')' at [line: 12, col: 15]
	- Token::; ';' at [line: 12, col: 16]
	- Token::} '}' at [line: 13, col: 1]
	- Token::; ';' at [line: 13, col: 2]
	- Token::LET 'let' at [line: 15, col: 1]
	- Token::IDENT 'a' at [line: 15, col: 5]
	- Token::= '=' at [line: 15, col: 7]
	- Token::[ '[' at [line: 15, col: 9]
	- Token::INT '1' at [line: 15, col: 10]
	- Token::, ',' at [line: 15, col: 11]
	- Token::INT '2' at [line: 15, col: 13]
	- Token::, ',' at [line: 15, col: 14]
	- Token::INT '3' at [line: 15, col: 16]
	- Token::, ',' at [line: 15, col: 17]
	- Token::INT '4' at [line: 15, col: 19]
	- Token::] ']' at [line: 15, col: 20]
	- Token::; ';' at [line: 15, col: 21]
	- Token::LET 'let' at [line: 16, col: 1]
	- Token::IDENT 'double' at [line: 16, col: 5]
	- Token::= '=' at [line: 16, col: 12]
	- Token::FUNCTION 'fn' at [line: 16, col: 14]
	- Token::( '(' at [line: 16, col: 16]
	- Token::IDENT 'x' at [line: 16, col: 17]
	- Token::) ')' at [line: 16, col: 18]
	- Token::{ '{' at [line: 16, col: 20]
	- Token::IDENT 'x' at [line: 16, col: 22]
	- Token::* '*' at [line: 16, col: 24]
	- Token::INT '2' at [line: 16, col: 26]
	- Token::} '}' at [line: 16, col: 28]
	- Token::; ';' at [line: 16, col: 29]
	- Token::IDENT 'map' at [line: 17, col: 1]
	- Token::( '(' at [line: 17, col: 4]
	- Token::IDENT 'a' at [line: 17, col: 5]
	- Token::, ',' at [line: 17, col: 6]
	- Token::IDENT 'double' at [line: 17, col: 8]
	- Token::) ')' at [line: 17, col: 14]
	- Token::; ';' at [line: 17, col: 15]
```
## Parsing
parsing description here

Successfully parsed the program!

Here is your program node in tree format:
```json
&ast.Program{
  NoStatements: false,
  Statements: []ast.Statement{
    &ast.LetStatement{
      Token: token.Token{
        Type: "LET",
        Literal: "let",
        Line: 4,
        Col: 1,
      },
      Name: &ast.Identifier{
        Token: token.Token{
          Type: "IDENT",
          Literal: "map",
          Line: 4,
          Col: 5,
        },
        Value: "map",
      },
      Value: &ast.FunctionLiteral{
        Token: token.Token{
          Type: "FUNCTION",
          Literal: "fn",
          Line: 4,
          Col: 11,
        },
        Parameters: []*ast.Identifier{
          &ast.Identifier{
            Token: token.Token{
              Type: "IDENT",
              Literal: "arr",
              Line: 4,
              Col: 14,
            },
            Value: "arr",
          },
          &ast.Identifier{
            Token: token.Token{
              Type: "IDENT",
              Literal: "f",
              Line: 4,
              Col: 19,
            },
            Value: "f",
          },
        },
        Body: &ast.BlockStatement{
          Token: token.Token{
            Type: "{",
            Literal: "{",
            Line: 4,
            Col: 22,
          },
          Statements: []ast.Statement{
            &ast.LetStatement{
              Token: token.Token{
                Type: "LET",
                Literal: "let",
                Line: 5,
                Col: 3,
              },
              Name: &ast.Identifier{
                Token: token.Token{
                  Type: "IDENT",
                  Literal: "iter",
                  Line: 5,
                  Col: 7,
                },
                Value: "iter",
              },
              Value: &ast.FunctionLiteral{
                Token: token.Token{
                  Type: "FUNCTION",
                  Literal: "fn",
                  Line: 5,
                  Col: 14,
                },
                Parameters: []*ast.Identifier{
                  &ast.Identifier{
                    Token: token.Token{
                      Type: "IDENT",
                      Literal: "arr",
                      Line: 5,
                      Col: 17,
                    },
                    Value: "arr",
                  },
                  &ast.Identifier{
                    Token: token.Token{
                      Type: "IDENT",
                      Literal: "accumulated",
                      Line: 5,
                      Col: 22,
                    },
                    Value: "accumulated",
                  },
                },
                Body: &ast.BlockStatement{
                  Token: token.Token{
                    Type: "{",
                    Literal: "{",
                    Line: 5,
                    Col: 35,
                  },
                  Statements: []ast.Statement{
                    &ast.ExpressionStatement{
                      Token: token.Token{
                        Type: "IF",
                        Literal: "if",
                        Line: 6,
                        Col: 5,
                      },
                      Expression: &ast.IfExpression{
                        Token: token.Token{
                          Type: "IF",
                          Literal: "if",
                          Line: 6,
                          Col: 5,
                        },
                        Condition: &ast.InfixExpression{
                          Token: token.Token{
                            Type: "==",
                            Literal: "==",
                            Line: 0,
                            Col: 0,
                          },
                          Left: &ast.CallExpression{
                            Token: token.Token{
                              Type: "(",
                              Literal: "(",
                              Line: 6,
                              Col: 12,
                            },
                            Function: &ast.Identifier{
                              Token: token.Token{
                                Type: "IDENT",
                                Literal: "len",
                                Line: 6,
                                Col: 9,
                              },
                              Value: "len",
                            },
                            Arguments: []ast.Expression{
                              &ast.Identifier{
                                Token: token.Token{
                                  Type: "IDENT",
                                  Literal: "arr",
                                  Line: 6,
                                  Col: 13,
                                },
                                Value: "arr",
                              },
                            },
                          },
                          Operator: "==",
                          Right: &ast.IntegerLiteral{
                            Token: token.Token{
                              Type: "INT",
                              Literal: "0",
                              Line: 6,
                              Col: 21,
                            },
                            Value: 0,
                          },
                        },
                        Consequence: &ast.BlockStatement{
                          Token: token.Token{
                            Type: "{",
                            Literal: "{",
                            Line: 6,
                            Col: 24,
                          },
                          Statements: []ast.Statement{
                            &ast.ExpressionStatement{
                              Token: token.Token{
                                Type: "IDENT",
                                Literal: "accumulated",
                                Line: 7,
                                Col: 7,
                              },
                              Expression: &ast.Identifier{
                                Token: token.Token{
                                  Type: "IDENT",
                                  Literal: "accumulated",
                                  Line: 7,
                                  Col: 7,
                                },
                                Value: "accumulated",
                              },
                            },
                          },
                        },
                        Alternative: &ast.BlockStatement{
                          Token: token.Token{
                            Type: "{",
                            Literal: "{",
                            Line: 8,
                            Col: 12,
                          },
                          Statements: []ast.Statement{
                            &ast.ExpressionStatement{
                              Token: token.Token{
                                Type: "IDENT",
                                Literal: "iter",
                                Line: 9,
                                Col: 7,
                              },
                              Expression: &ast.CallExpression{
                                Token: token.Token{
                                  Type: "(",
                                  Literal: "(",
                                  Line: 9,
                                  Col: 11,
                                },
                                Function: &ast.Identifier{
                                  Token: token.Token{
                                    Type: "IDENT",
                                    Literal: "iter",
                                    Line: 9,
                                    Col: 7,
                                  },
                                  Value: "iter",
                                },
                                Arguments: []ast.Expression{
                                  &ast.CallExpression{
                                    Token: token.Token{
                                      Type: "(",
                                      Literal: "(",
                                      Line: 9,
                                      Col: 16,
                                    },
                                    Function: &ast.Identifier{
                                      Token: token.Token{
                                        Type: "IDENT",
                                        Literal: "rest",
                                        Line: 9,
                                        Col: 12,
                                      },
                                      Value: "rest",
                                    },
                                    Arguments: []ast.Expression{
                                      &ast.Identifier{
                                        Token: token.Token{
                                          Type: "IDENT",
                                          Literal: "arr",
                                          Line: 9,
                                          Col: 17,
                                        },
                                        Value: "arr",
                                      },
                                    },
                                  },
                                  &ast.CallExpression{
                                    Token: token.Token{
                                      Type: "(",
                                      Literal: "(",
                                      Line: 9,
                                      Col: 27,
                                    },
                                    Function: &ast.Identifier{
                                      Token: token.Token{
                                        Type: "IDENT",
                                        Literal: "push",
                                        Line: 9,
                                        Col: 23,
                                      },
                                      Value: "push",
                                    },
                                    Arguments: []ast.Expression{
                                      &ast.Identifier{
                                        Token: token.Token{
                                          Type: "IDENT",
                                          Literal: "accumulated",
                                          Line: 9,
                                          Col: 28,
                                        },
                                        Value: "accumulated",
                                      },
                                      &ast.CallExpression{
                                        Token: token.Token{
                                          Type: "(",
                                          Literal: "(",
                                          Line: 9,
                                          Col: 42,
                                        },
                                        Function: &ast.Identifier{
                                          Token: token.Token{
                                            Type: "IDENT",
                                            Literal: "f",
                                            Line: 9,
                                            Col: 41,
                                          },
                                          Value: "f",
                                        },
                                        Arguments: []ast.Expression{
                                          &ast.CallExpression{
                                            Token: token.Token{
                                              Type: "(",
                                              Literal: "(",
                                              Line: 9,
                                              Col: 48,
                                            },
                                            Function: &ast.Identifier{
                                              Token: token.Token{
                                                Type: "IDENT",
                                                Literal: "first",
                                                Line: 9,
                                                Col: 43,
                                              },
                                              Value: "first",
                                            },
                                            Arguments: []ast.Expression{
                                              &ast.Identifier{
                                                Token: token.Token{
                                                  Type: "IDENT",
                                                  Literal: "arr",
                                                  Line: 9,
                                                  Col: 49,
                                                },
                                                Value: "arr",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
            &ast.ExpressionStatement{
              Token: token.Token{
                Type: "IDENT",
                Literal: "iter",
                Line: 12,
                Col: 3,
              },
              Expression: &ast.CallExpression{
                Token: token.Token{
                  Type: "(",
                  Literal: "(",
                  Line: 12,
                  Col: 7,
                },
                Function: &ast.Identifier{
                  Token: token.Token{
                    Type: "IDENT",
                    Literal: "iter",
                    Line: 12,
                    Col: 3,
                  },
                  Value: "iter",
                },
                Arguments: []ast.Expression{
                  &ast.Identifier{
                    Token: token.Token{
                      Type: "IDENT",
                      Literal: "arr",
                      Line: 12,
                      Col: 8,
                    },
                    Value: "arr",
                  },
                  &ast.ArrayLiteral{
                    Token: token.Token{
                      Type: "[",
                      Literal: "[",
                      Line: 12,
                      Col: 13,
                    },
                    Elements: []ast.Expression{},
                  },
                },
              },
            },
          },
        },
      },
    },
    &ast.LetStatement{
      Token: token.Token{
        Type: "LET",
        Literal: "let",
        Line: 15,
        Col: 1,
      },
      Name: &ast.Identifier{
        Token: token.Token{
          Type: "IDENT",
          Literal: "a",
          Line: 15,
          Col: 5,
        },
        Value: "a",
      },
      Value: &ast.ArrayLiteral{
        Token: token.Token{
          Type: "[",
          Literal: "[",
          Line: 15,
          Col: 9,
        },
        Elements: []ast.Expression{
          &ast.IntegerLiteral{
            Token: token.Token{
              Type: "INT",
              Literal: "1",
              Line: 15,
              Col: 10,
            },
            Value: 1,
          },
          &ast.IntegerLiteral{
            Token: token.Token{
              Type: "INT",
              Literal: "2",
              Line: 15,
              Col: 13,
            },
            Value: 2,
          },
          &ast.IntegerLiteral{
            Token: token.Token{
              Type: "INT",
              Literal: "3",
              Line: 15,
              Col: 16,
            },
            Value: 3,
          },
          &ast.IntegerLiteral{
            Token: token.Token{
              Type: "INT",
              Literal: "4",
              Line: 15,
              Col: 19,
            },
            Value: 4,
          },
        },
      },
    },
    &ast.LetStatement{
      Token: token.Token{
        Type: "LET",
        Literal: "let",
        Line: 16,
        Col: 1,
      },
      Name: &ast.Identifier{
        Token: token.Token{
          Type: "IDENT",
          Literal: "double",
          Line: 16,
          Col: 5,
        },
        Value: "double",
      },
      Value: &ast.FunctionLiteral{
        Token: token.Token{
          Type: "FUNCTION",
          Literal: "fn",
          Line: 16,
          Col: 14,
        },
        Parameters: []*ast.Identifier{
          &ast.Identifier{
            Token: token.Token{
              Type: "IDENT",
              Literal: "x",
              Line: 16,
              Col: 17,
            },
            Value: "x",
          },
        },
        Body: &ast.BlockStatement{
          Token: token.Token{
            Type: "{",
            Literal: "{",
            Line: 16,
            Col: 20,
          },
          Statements: []ast.Statement{
            &ast.ExpressionStatement{
              Token: token.Token{
                Type: "IDENT",
                Literal: "x",
                Line: 16,
                Col: 22,
              },
              Expression: &ast.InfixExpression{
                Token: token.Token{
                  Type: "*",
                  Literal: "*",
                  Line: 16,
                  Col: 24,
                },
                Left: &ast.Identifier{
                  Token: token.Token{
                    Type: "IDENT",
                    Literal: "x",
                    Line: 16,
                    Col: 22,
                  },
                  Value: "x",
                },
                Operator: "*",
                Right: &ast.IntegerLiteral{
                  Token: token.Token{
                    Type: "INT",
                    Literal: "2",
                    Line: 16,
                    Col: 26,
                  },
                  Value: 2,
                },
              },
            },
          },
        },
      },
    },
    &ast.ExpressionStatement{
      Token: token.Token{
        Type: "IDENT",
        Literal: "map",
        Line: 17,
        Col: 1,
      },
      Expression: &ast.CallExpression{
        Token: token.Token{
          Type: "(",
          Literal: "(",
          Line: 17,
          Col: 4,
        },
        Function: &ast.Identifier{
          Token: token.Token{
            Type: "IDENT",
            Literal: "map",
            Line: 17,
            Col: 1,
          },
          Value: "map",
        },
        Arguments: []ast.Expression{
          &ast.Identifier{
            Token: token.Token{
              Type: "IDENT",
              Literal: "a",
              Line: 17,
              Col: 5,
            },
            Value: "a",
          },
          &ast.Identifier{
            Token: token.Token{
              Type: "IDENT",
              Literal: "double",
              Line: 17,
              Col: 8,
            },
            Value: "double",
          },
        },
      },
    },
  },
  Modules: []*ast.ModuleStatement{
    &ast.ModuleStatement{
      Token: token.Token{
        Type: "MOD",
        Literal: "mod",
        Line: 1,
        Col: 1,
      },
      Name: &ast.Identifier{
        Token: token.Token{
          Type: "IDENT",
          Literal: "strings",
          Line: 1,
          Col: 5,
        },
        Value: "strings",
      },
      ImportAll: false,
      Imports: []*ast.Identifier{
        &ast.Identifier{
          Token: token.Token{
            Type: "IDENT",
            Literal: "len",
            Line: 1,
            Col: 16,
          },
          Value: "len",
        },
      },
    },
    &ast.ModuleStatement{
      Token: token.Token{
        Type: "MOD",
        Literal: "mod",
        Line: 2,
        Col: 1,
      },
      Name: &ast.Identifier{
        Token: token.Token{
          Type: "IDENT",
          Literal: "arrays",
          Line: 2,
          Col: 5,
        },
        Value: "arrays",
      },
      ImportAll: false,
      Imports: []*ast.Identifier{
        &ast.Identifier{
          Token: token.Token{
            Type: "IDENT",
            Literal: "first",
            Line: 2,
            Col: 15,
          },
          Value: "first",
        },
        &ast.Identifier{
          Token: token.Token{
            Type: "IDENT",
            Literal: "rest",
            Line: 2,
            Col: 22,
          },
          Value: "rest",
        },
        &ast.Identifier{
          Token: token.Token{
            Type: "IDENT",
            Literal: "push",
            Line: 2,
            Col: 28,
          },
          Value: "push",
        },
      },
    },
  },
}
```

## Evaluation
evaluation description here

